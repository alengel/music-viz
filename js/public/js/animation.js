define([
    'js/public/lib/raphael'], 
function(){
    'use strict';

    var Animation = {

        refreshInterval: null,
        counter: 0,

        initialize: function(){
            this.startTimer();
            this.drawBackground();
        },

        drawBackground: function(){
            var bg = document.getElementById('animation-content');
            this.paper = new Raphael(bg, '40%', '40%'); 
        },

        startAnimation: function(){
            Animation.counter++;

            if(Animation.counter === 1){
                Animation.drawTrumpets();
            }

            if(Animation.counter === 70){
                location.reload();
            }
        },

        drawTrumpets: function(){
            var trumpet = this.paper.path('M 233.5 1.4 C 223.4 4.6 214.8 11.2 207.6 21.4 C 202.5 28.5 196 41.2 193.6 48.7 C 190 59.6 178 75.1 168.6 81.1 C 162.1 85.2 147 90.6 144.7 89.7 C 142.8 89 140.7 74.8 141.2 66.5 C 141.5 60.6 141.5 60.6 145 59.9 C 149.3 59 152 55.8 152 51.4 C 152 46.3 149.3 45.4 137.4 46.7 C 131.3 47.4 127.3 48.3 126.3 49.3 C 125.2 50.4 123.4 50.7 119.1 50.3 C 115.5 50 111.4 50.4 107.5 51.5 C 104.2 52.4 97.6 54.2 92.8 55.5 C 83.9 58 69.4 64.7 67.1 67.3 C 66.2 68.5 66.1 69.4 67 70.9 C 68.1 73 70 73.7 75.5 74.2 C 78.3 74.5 78.6 74.9 80.7 82.5 C 81.9 86.9 83 91.1 83 91.7 C 83 92.7 78.4 93 63.1 93 C 46.1 93 43.1 92.8 41.9 91.4 C 40.9 90.2 39.5 89.9 36.1 90.4 C 29.6 91.3 23.9 88.2 18.6 81.1 C 16.3 77.9 13.8 73.5 13.1 71.2 C 12.3 68.9 11.4 67 11 67 C 10 67 4.5 79.4 2.5 86 C 0.2 93.6 -0.6 110 0.9 118.6 C 1.6 122.4 3.3 128.3 4.6 131.7 C 7.5 138.9 14 151 15.1 151 C 15.4 151 16 149.2 16.4 146.9 C 17.9 137.3 30 120.5 35.8 119.8 C 37.6 119.6 38.9 118.6 39.8 116.7 C 41.9 112.3 57 106 65.5 106 L 68.2 106 L 64.5 110.1 C 57.1 118.4 53 132.7 56 140 C 57.7 144 65.7 151.3 72 154.5 C 78 157.6 88.4 160.4 99.8 162 L 107.8 163.2 L 109.4 167.5 L 111.1 171.8 L 118.1 172.5 C 122 172.9 125.3 173 125.6 172.7 C 125.9 172.4 125.4 170.6 124.6 168.6 L 123.1 165 L 126.5 165 C 129.6 165 130 165.3 131.1 169 L 132.3 173.1 L 138.9 172.8 C 146 172.5 145.9 172.6 144.5 166.5 C 143.9 163.6 144 163.4 148 162.3 C 152.6 161.1 151.9 160.5 155 168.6 C 156 171.1 156.2 171.2 162.3 170.5 C 165.7 170.1 168.8 169.5 169.2 169.1 C 169.5 168.8 168.6 165.3 167 161.5 L 164.2 154.5 L 168.2 150.2 C 176.5 141.1 179.8 128.6 176.6 117.6 C 175.6 114.4 175.1 111.6 175.3 111.3 C 175.8 110.9 181.7 113.7 184.7 115.8 C 185.4 116.2 186.8 121.8 187.9 128.1 C 191.4 148.5 197.8 165 207.5 178.5 C 216.5 191.1 228.4 198.8 240.4 199.7 C 266 201.8 289.6 172.3 297.7 128 C 300.1 114.8 300.1 85.2 297.7 72 C 292.3 42.4 279.4 17.9 263.4 6.9 C 254.3 0.7 242.6 -1.5 233.5 1.4 Z M 256.5 8.4 C 289.4 24.8 304.7 95.8 287 149.2 C 280.1 170 268.6 186 256 192.2 C 252.4 194 249.8 194.5 242.5 194.5 C 231.4 194.5 226.5 192.4 217.8 183.7 C 200.6 166.5 191 136.3 191 99.8 C 191.1 72.3 195.8 51.3 206.1 32.5 C 214 18.1 223 9.8 234.9 5.9 C 239.6 4.4 251.1 5.7 256.5 8.4 Z M 146.5 52.5 C 146.5 54.8 145.9 55.7 143.5 56.8 C 137.5 59.4 137.5 59.4 137.2 66.6 C 136.9 72.6 137.4 76.9 139.6 88.2 C 140.1 90.7 140 90.8 137.3 90.1 C 134.8 89.5 134.3 88.7 133.3 83.4 C 132.6 80.2 131.7 73.1 131.3 67.7 C 130.9 60.8 130.3 57.7 129.3 57.3 C 126.1 56.1 129.4 51.6 134.6 50 C 136.2 49.5 139.5 49.2 142 49.3 C 146.3 49.5 146.5 49.6 146.5 52.5 Z M 120.7 54.7 C 121.2 55.9 120 57.5 116.8 60.4 L 112.2 64.5 L 114.6 76 C 117.7 91 117.7 91 114.1 91 C 110.7 91 110.9 91.4 108 78 C 106.9 72.8 105.8 67.5 105.5 66.3 C 105.2 65.1 104.1 64 102.9 63.8 C 99.9 63.4 98.2 60.5 99.6 58.3 C 102.2 54.2 119.4 51.3 120.7 54.7 Z M 129.2 73 C 130.1 80.4 131.1 87.3 131.4 88.2 C 131.7 89.7 131.1 90 127 90 L 122.2 90 L 120.6 80.7 C 119.6 75.7 118.7 70.1 118.4 68.3 C 117.9 65.6 118.3 64.7 121.2 62.1 C 126.7 57 127.3 57.8 129.2 73 Z M 95 60.5 C 95 60.8 93.4 62.8 91.4 64.9 L 87.9 68.9 L 90.9 79.7 C 92.6 85.7 94 90.9 94 91.4 C 94 91.8 92.3 92 90.3 91.8 C 86.3 91.5 86.7 92.2 82 74.3 C 81 70.4 80.7 70.1 78.2 70.6 C 76.6 70.9 74.7 70.5 73.6 69.7 C 71.8 68.4 71.8 68.2 74.9 65.9 C 78.7 63.1 87.2 60.2 91.8 60.1 C 93.5 60 95 60.2 95 60.5 Z M 104.6 78.5 C 107.8 92.3 107.8 92.2 103.3 91.8 L 99.5 91.5 L 96.9 81.5 C 94.5 72.4 94.4 71.3 95.8 69.7 C 96.7 68.7 98.4 68 99.9 68.2 C 102.2 68.5 102.5 69.3 104.6 78.5 Z M 185.9 87.1 C 185.3 94.5 185.1 102.6 185.4 105.2 C 185.8 108.9 185.6 110 184.5 110 C 181.4 110 172.5 105.7 168.2 102.2 C 165.8 100.2 160.8 97.1 157.2 95.4 L 150.6 92.3 L 154.1 91.7 C 162.8 90 174.4 83.8 182.5 76.7 C 184.7 74.8 186.6 73.3 186.7 73.4 C 186.9 73.6 186.5 79.7 185.9 87.1 Z M 21.1 91.8 C 23 92.8 25.8 94 27.4 94.4 C 29.9 95 30.1 95.4 29.4 97.8 C 29 99.3 28.6 103.9 28.6 108.1 L 28.5 115.7 L 23.7 120.7 C 21 123.4 17.8 127.9 16.5 130.6 L 14.2 135.5 L 14.1 110.5 C 14.1 86.2 14.1 85.6 15.9 87.7 C 16.9 88.9 19.2 90.7 21.1 91.8 Z M 149.6 96.1 C 160.8 100.3 166.5 105.5 171.4 116 C 176.9 127.8 173.4 140.5 161.6 151.3 C 151.8 160.2 134.7 163.6 113 161 C 85.6 157.6 75 154.5 66.3 147.4 C 60.1 142.3 58.7 139 59.2 131.1 C 59.8 122.9 61.6 119.5 69 111.8 C 74 106.6 75.5 105.6 79.4 105 C 81.9 104.6 84 104.4 84 104.5 C 84 104.5 81.6 107.1 78.7 110.1 C 72 117 69 123 69 129.8 C 69 139.2 71.9 143.5 81.5 147.9 C 91.4 152.5 112.1 156 128.8 156 L 141.4 156 L 149.6 152 C 155.7 149.1 159 146.7 162.4 142.8 C 169.8 134.4 170.8 127.3 166.1 117.4 C 157.8 99.9 140.1 96.6 77 100.9 C 56 102.3 50.2 103.6 39.3 109.1 C 35.1 111.2 34 111.4 33.6 110.3 C 32.6 107.9 32.9 105.2 34.6 101 L 36.2 97 L 56.9 97 C 68.3 97 81.4 96.5 86 95.9 C 99.2 94.2 119.3 93.1 132.1 93.5 C 140.9 93.8 145 94.4 149.6 96.1 Z M 111 106.2 C 114.8 121 117.4 129.9 121 140.5 C 123.2 147 125 152.8 125 153.3 C 125 153.7 123.6 154 121.8 153.8 C 118.8 153.5 118.5 153 115.3 144.5 C 111.3 133.8 104.4 111.9 103.5 106.8 C 102.8 103.4 103 103.1 105.7 102.7 C 107.2 102.5 108.8 102.2 109.2 102.1 C 109.6 102.1 110.4 103.9 111 106.2 Z M 121.4 107.7 C 125.1 121.1 130.8 140.5 132 143.7 C 133.2 146.6 132.1 153 130.5 153 C 129 153 122.4 135 117.4 117.3 C 113.2 102.3 113.2 102 116.9 102 C 119.6 102 120 102.4 121.4 107.7 Z M 133.2 103.2 C 134 103.9 135.7 108.8 137 114 C 139.1 122.4 145.6 143.8 147.4 148.1 C 147.9 149.3 147.2 150.1 144.3 151.3 C 142.2 152.1 140.2 152.5 139.9 152.2 C 138.7 151 127.7 114.3 125.6 104.7 C 125 102.2 125.2 102 128.3 102 C 130.1 102 132.3 102.6 133.2 103.2 Z M 100.4 113.8 C 102 119.7 104.8 129.2 106.6 135 C 110.8 148.3 111.1 153.7 107.4 151.2 C 105.2 149.8 93.2 117.8 91.5 108.8 C 90.9 105.9 91.2 105 92.7 104.1 C 96.7 101.8 97.4 102.7 100.4 113.8 Z M 142 105 C 143.1 105.6 144.6 108.8 145.9 113.2 C 147.1 117.2 148.5 121.4 149.1 122.5 C 149.7 123.7 150.2 125.2 150.4 126 C 150.6 126.8 151.2 128.8 151.9 130.3 C 152.5 131.9 153.7 135.4 154.6 138.1 C 156.2 142.8 156.1 143.2 154.5 145 C 153.5 146.1 152.3 147 151.9 147 C 151.2 147 150.2 144.7 149.5 141.6 C 149.4 141 148.8 139.3 148.2 137.8 C 146.4 133.4 139.1 109.6 138.9 107.5 C 138.6 103.6 138.9 103.4 142 105 Z M 154.1 109.3 C 158.5 112.2 161.7 117.1 163.6 123.7 C 165.3 129.6 164.9 133 161.9 138 C 159.2 142.3 159.1 142.1 153.4 124 C 150.9 116 148.7 108.9 148.5 108.2 C 147.8 106.3 150.4 106.8 154.1 109.3 Z M 92.6 122.6 C 94.8 130.2 98 139.6 99.5 143.3 C 101 147 102 150.4 101.7 150.7 C 100.6 151.7 84.7 146.2 80.3 143.3 C 72.8 138.5 70.9 129.9 75.4 120.5 C 77.8 115.3 85.3 107.6 87.3 108.3 C 87.9 108.5 90.3 114.9 92.6 122.6Z');
            trumpet.attr({'fill':'#FFD700','stroke':'none'});
            trumpet=this.paper.path('M 230.2 91.4 C 225.6 93 222 96.7 222 99.7 C 222 103.3 227.1 107.6 233 109 C 239.5 110.6 246.8 108.8 251 104.7 C 254.6 101.1 254.8 99.1 251.6 95.3 C 247.5 90.4 237.7 88.6 230.2 91.4Z');
            trumpet.attr({'fill':'#FFD700','stroke':'none'});
        }, 

        startTimer: function(){
            Animation.refreshInterval = setInterval(Animation.startAnimation, 1000);
        },

        stopTimer: function(){
            clearInterval(Animation.refreshInterval);
        },

        resetTimer: function(){
            Animation.stopTimer();
            Animation.counter = 0;
        }
    };

    return Animation;
});